{"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/com.moyasar.MoyasarSdk\/documentation\/MoyasarSdk\/STCPayViewModel"},"topicSections":[{"anchor":"Initializers","identifiers":["doc:\/\/com.moyasar.MoyasarSdk\/documentation\/MoyasarSdk\/STCPayViewModel\/init(paymentRequest:resultCallback:)"],"generated":true,"title":"Initializers"},{"anchor":"Instance-Properties","identifiers":["doc:\/\/com.moyasar.MoyasarSdk\/documentation\/MoyasarSdk\/STCPayViewModel\/isLoading","doc:\/\/com.moyasar.MoyasarSdk\/documentation\/MoyasarSdk\/STCPayViewModel\/isValidOtp","doc:\/\/com.moyasar.MoyasarSdk\/documentation\/MoyasarSdk\/STCPayViewModel\/isValidPhoneNumber","doc:\/\/com.moyasar.MoyasarSdk\/documentation\/MoyasarSdk\/STCPayViewModel\/mobileNumber","doc:\/\/com.moyasar.MoyasarSdk\/documentation\/MoyasarSdk\/STCPayViewModel\/otp","doc:\/\/com.moyasar.MoyasarSdk\/documentation\/MoyasarSdk\/STCPayViewModel\/phoneNumberFormatter","doc:\/\/com.moyasar.MoyasarSdk\/documentation\/MoyasarSdk\/STCPayViewModel\/screenStep-swift.property","doc:\/\/com.moyasar.MoyasarSdk\/documentation\/MoyasarSdk\/STCPayViewModel\/showErrorHintView","doc:\/\/com.moyasar.MoyasarSdk\/documentation\/MoyasarSdk\/STCPayViewModel\/stcValidator"],"generated":true,"title":"Instance Properties"},{"anchor":"Instance-Methods","identifiers":["doc:\/\/com.moyasar.MoyasarSdk\/documentation\/MoyasarSdk\/STCPayViewModel\/initiatePayment()","doc:\/\/com.moyasar.MoyasarSdk\/documentation\/MoyasarSdk\/STCPayViewModel\/submitOtp()"],"generated":true,"title":"Instance Methods"},{"anchor":"Enumerations","identifiers":["doc:\/\/com.moyasar.MoyasarSdk\/documentation\/MoyasarSdk\/STCPayViewModel\/ScreenStep-swift.enum"],"generated":true,"title":"Enumerations"},{"anchor":"Default-Implementations","identifiers":["doc:\/\/com.moyasar.MoyasarSdk\/documentation\/MoyasarSdk\/STCPayViewModel\/ObservableObject-Implementations"],"generated":true,"title":"Default Implementations"}],"kind":"symbol","relationshipsSections":[{"identifiers":["doc:\/\/com.moyasar.MoyasarSdk\/7Combine16ObservableObjectP","doc:\/\/com.moyasar.MoyasarSdk\/s8SendableP"],"type":"conformsTo","kind":"relationships","title":"Conforms To"}],"abstract":[{"type":"text","text":"A view model that manages the STC Pay payment flow."}],"schemaVersion":{"major":0,"minor":3,"patch":0},"variants":[{"paths":["\/documentation\/moyasarsdk\/stcpayviewmodel"],"traits":[{"interfaceLanguage":"swift"}]}],"metadata":{"externalID":"s:10MoyasarSdk15STCPayViewModelC","roleHeading":"Class","modules":[{"name":"MoyasarSdk"}],"symbolKind":"class","navigatorTitle":[{"text":"STCPayViewModel","kind":"identifier"}],"title":"STCPayViewModel","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"STCPayViewModel"}],"role":"symbol"},"sections":[],"primaryContentSections":[{"declarations":[{"languages":["swift"],"platforms":["iOS"],"tokens":[{"kind":"attribute","text":"@"},{"kind":"attribute","text":"MainActor","preciseIdentifier":"s:ScM"},{"kind":"text","text":" "},{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"STCPayViewModel"}]}],"kind":"declarations"},{"content":[{"type":"heading","text":"Overview","anchor":"overview","level":2},{"inlineContent":[{"type":"text","text":"Responsibilities:"}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Validates user input (mobile number and OTP)"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Initiates STC Pay payment and advances the UI state"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Submits OTP and reports the result via "},{"type":"codeVoice","code":"STCResultCallback"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Exposes observable state for building custom UIs"}]}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Typical usage in a custom view:"}]},{"type":"codeListing","syntax":"swift","code":["let vm = STCPayViewModel(paymentRequest: request) { result in","    \/\/ handle result","}","\/\/ Bind vm.mobileNumber and vm.otp","\/\/ Call await vm.initiatePayment() then await vm.submitOtp()"]}],"kind":"content"}],"hierarchy":{"paths":[["doc:\/\/com.moyasar.MoyasarSdk\/documentation\/MoyasarSdk"]]},"references":{"doc://com.moyasar.MoyasarSdk/documentation/MoyasarSdk/STCPayViewModel/screenStep-swift.property":{"url":"\/documentation\/moyasarsdk\/stcpayviewmodel\/screenstep-swift.property","identifier":"doc:\/\/com.moyasar.MoyasarSdk\/documentation\/MoyasarSdk\/STCPayViewModel\/screenStep-swift.property","role":"symbol","title":"screenStep","fragments":[{"text":"var","kind":"keyword"},{"text":" ","kind":"text"},{"text":"screenStep","kind":"identifier"},{"text":": ","kind":"text"},{"preciseIdentifier":"s:10MoyasarSdk15STCPayViewModelC10ScreenStepO","text":"ScreenStep","kind":"typeIdentifier"}],"type":"topic","abstract":[{"text":"Current step in the flow (.mobileNumber then .otp). Use it to switch your UI.","type":"text"}],"kind":"symbol"},"doc://com.moyasar.MoyasarSdk/documentation/MoyasarSdk/STCPayViewModel/stcValidator":{"url":"\/documentation\/moyasarsdk\/stcpayviewmodel\/stcvalidator","identifier":"doc:\/\/com.moyasar.MoyasarSdk\/documentation\/MoyasarSdk\/STCPayViewModel\/stcValidator","role":"symbol","title":"stcValidator","fragments":[{"kind":"keyword","text":"var"},{"text":" ","kind":"text"},{"text":"stcValidator","kind":"identifier"},{"text":": ","kind":"text"},{"text":"STCValidator","kind":"typeIdentifier","preciseIdentifier":"s:10MoyasarSdk12STCValidatorC"}],"type":"topic","abstract":[],"kind":"symbol"},"doc://com.moyasar.MoyasarSdk/documentation/MoyasarSdk/STCPayViewModel/init(paymentRequest:resultCallback:)":{"identifier":"doc:\/\/com.moyasar.MoyasarSdk\/documentation\/MoyasarSdk\/STCPayViewModel\/init(paymentRequest:resultCallback:)","fragments":[{"kind":"identifier","text":"init"},{"text":"(","kind":"text"},{"kind":"externalParam","text":"paymentRequest"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"PaymentRequest","preciseIdentifier":"s:10MoyasarSdk14PaymentRequestV"},{"text":", ","kind":"text"},{"kind":"externalParam","text":"resultCallback"},{"text":": ","kind":"text"},{"kind":"typeIdentifier","text":"STCResultCallback","preciseIdentifier":"s:10MoyasarSdk17STCResultCallbacka"},{"kind":"text","text":")"}],"kind":"symbol","url":"\/documentation\/moyasarsdk\/stcpayviewmodel\/init(paymentrequest:resultcallback:)","abstract":[{"type":"text","text":"Creates a view model for the given payment request and result callback."}],"title":"init(paymentRequest:resultCallback:)","type":"topic","role":"symbol"},"doc://com.moyasar.MoyasarSdk/7Combine16ObservableObjectP":{"title":"Combine.ObservableObject","identifier":"doc:\/\/com.moyasar.MoyasarSdk\/7Combine16ObservableObjectP","type":"unresolvable"},"doc://com.moyasar.MoyasarSdk/documentation/MoyasarSdk/STCPayViewModel/showErrorHintView":{"role":"symbol","url":"\/documentation\/moyasarsdk\/stcpayviewmodel\/showerrorhintview","abstract":[{"type":"text","text":"Emits true when error hints should be visible (e.g., after user interaction)."}],"kind":"symbol","identifier":"doc:\/\/com.moyasar.MoyasarSdk\/documentation\/MoyasarSdk\/STCPayViewModel\/showErrorHintView","title":"showErrorHintView","fragments":[{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"kind":"identifier","text":"showErrorHintView"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"CurrentValueSubject","preciseIdentifier":"s:7Combine19CurrentValueSubjectC"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"Bool","preciseIdentifier":"s:Sb"},{"kind":"text","text":", "},{"kind":"typeIdentifier","text":"Never","preciseIdentifier":"s:s5NeverO"},{"kind":"text","text":">"}],"type":"topic"},"doc://com.moyasar.MoyasarSdk/documentation/MoyasarSdk/STCPayViewModel/ScreenStep-swift.enum":{"identifier":"doc:\/\/com.moyasar.MoyasarSdk\/documentation\/MoyasarSdk\/STCPayViewModel\/ScreenStep-swift.enum","fragments":[{"kind":"keyword","text":"enum"},{"kind":"text","text":" "},{"kind":"identifier","text":"ScreenStep"}],"kind":"symbol","url":"\/documentation\/moyasarsdk\/stcpayviewmodel\/screenstep-swift.enum","abstract":[{"type":"text","text":"Represents the current UI step in the STC Pay flow."}],"navigatorTitle":[{"kind":"identifier","text":"ScreenStep"}],"title":"STCPayViewModel.ScreenStep","type":"topic","role":"symbol"},"doc://com.moyasar.MoyasarSdk/documentation/MoyasarSdk/STCPayViewModel/initiatePayment()":{"identifier":"doc:\/\/com.moyasar.MoyasarSdk\/documentation\/MoyasarSdk\/STCPayViewModel\/initiatePayment()","url":"\/documentation\/moyasarsdk\/stcpayviewmodel\/initiatepayment()","role":"symbol","title":"initiatePayment()","fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"initiatePayment","kind":"identifier"},{"kind":"text","text":"() "},{"text":"async","kind":"keyword"}],"type":"topic","abstract":[{"type":"text","text":"Begins the STC Pay payment flow after validating the mobile number."},{"type":"text","text":" "},{"type":"text","text":"Transitions "},{"code":"screenStep","type":"codeVoice"},{"type":"text","text":" to "},{"type":"codeVoice","code":".otp"},{"type":"text","text":" if initiation succeeds."}],"kind":"symbol"},"doc://com.moyasar.MoyasarSdk/documentation/MoyasarSdk/STCPayViewModel/isValidPhoneNumber":{"fragments":[{"text":"var","kind":"keyword"},{"text":" ","kind":"text"},{"text":"isValidPhoneNumber","kind":"identifier"},{"text":": ","kind":"text"},{"text":"Bool","kind":"typeIdentifier","preciseIdentifier":"s:Sb"}],"role":"symbol","kind":"symbol","url":"\/documentation\/moyasarsdk\/stcpayviewmodel\/isvalidphonenumber","abstract":[{"text":"True when the entered mobile number is considered valid.","type":"text"}],"title":"isValidPhoneNumber","type":"topic","identifier":"doc:\/\/com.moyasar.MoyasarSdk\/documentation\/MoyasarSdk\/STCPayViewModel\/isValidPhoneNumber"},"doc://com.moyasar.MoyasarSdk/documentation/MoyasarSdk/STCPayViewModel/ObservableObject-Implementations":{"identifier":"doc:\/\/com.moyasar.MoyasarSdk\/documentation\/MoyasarSdk\/STCPayViewModel\/ObservableObject-Implementations","url":"\/documentation\/moyasarsdk\/stcpayviewmodel\/observableobject-implementations","role":"collectionGroup","title":"ObservableObject Implementations","type":"topic","abstract":[],"kind":"article"},"doc://com.moyasar.MoyasarSdk/documentation/MoyasarSdk/STCPayViewModel/phoneNumberFormatter":{"role":"symbol","url":"\/documentation\/moyasarsdk\/stcpayviewmodel\/phonenumberformatter","abstract":[{"type":"text","text":"Utilities for formatting phone numbers (and amounts in related SDK helpers)."}],"kind":"symbol","identifier":"doc:\/\/com.moyasar.MoyasarSdk\/documentation\/MoyasarSdk\/STCPayViewModel\/phoneNumberFormatter","title":"phoneNumberFormatter","fragments":[{"text":"var","kind":"keyword"},{"kind":"text","text":" "},{"text":"phoneNumberFormatter","kind":"identifier"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"PhoneNumberFormatter","preciseIdentifier":"s:10MoyasarSdk20PhoneNumberFormatterC"}],"type":"topic"},"doc://com.moyasar.MoyasarSdk/documentation/MoyasarSdk/STCPayViewModel/submitOtp()":{"identifier":"doc:\/\/com.moyasar.MoyasarSdk\/documentation\/MoyasarSdk\/STCPayViewModel\/submitOtp()","fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"submitOtp","kind":"identifier"},{"text":"() ","kind":"text"},{"text":"async","kind":"keyword"}],"kind":"symbol","url":"\/documentation\/moyasarsdk\/stcpayviewmodel\/submitotp()","abstract":[{"type":"text","text":"Submits the entered OTP to complete the STC Pay payment."},{"type":"text","text":" "},{"type":"text","text":"Calls "},{"code":"resultCallback","type":"codeVoice"},{"type":"text","text":" with success or failure."}],"title":"submitOtp()","type":"topic","role":"symbol"},"doc://com.moyasar.MoyasarSdk/documentation/MoyasarSdk/STCPayViewModel/isLoading":{"identifier":"doc:\/\/com.moyasar.MoyasarSdk\/documentation\/MoyasarSdk\/STCPayViewModel\/isLoading","fragments":[{"text":"var","kind":"keyword"},{"text":" ","kind":"text"},{"text":"isLoading","kind":"identifier"},{"text":": ","kind":"text"},{"preciseIdentifier":"s:Sb","text":"Bool","kind":"typeIdentifier"}],"kind":"symbol","url":"\/documentation\/moyasarsdk\/stcpayviewmodel\/isloading","abstract":[{"type":"text","text":"Indicates whether a network request (initiation or OTP submission) is in progress."}],"title":"isLoading","type":"topic","role":"symbol"},"doc://com.moyasar.MoyasarSdk/documentation/MoyasarSdk/STCPayViewModel/otp":{"role":"symbol","fragments":[{"text":"var","kind":"keyword"},{"text":" ","kind":"text"},{"text":"otp","kind":"identifier"},{"text":": ","kind":"text"},{"preciseIdentifier":"s:SS","text":"String","kind":"typeIdentifier"}],"abstract":[{"type":"text","text":"The user’s OTP input. Bind your text field to this."}],"kind":"symbol","identifier":"doc:\/\/com.moyasar.MoyasarSdk\/documentation\/MoyasarSdk\/STCPayViewModel\/otp","type":"topic","title":"otp","url":"\/documentation\/moyasarsdk\/stcpayviewmodel\/otp"},"doc://com.moyasar.MoyasarSdk/documentation/MoyasarSdk/STCPayViewModel/mobileNumber":{"role":"symbol","url":"\/documentation\/moyasarsdk\/stcpayviewmodel\/mobilenumber","abstract":[{"type":"text","text":"The user’s mobile number input. Bind your text field to this."}],"kind":"symbol","identifier":"doc:\/\/com.moyasar.MoyasarSdk\/documentation\/MoyasarSdk\/STCPayViewModel\/mobileNumber","title":"mobileNumber","fragments":[{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"kind":"identifier","text":"mobileNumber"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"}],"type":"topic"},"doc://com.moyasar.MoyasarSdk/documentation/MoyasarSdk/STCPayViewModel/isValidOtp":{"role":"symbol","url":"\/documentation\/moyasarsdk\/stcpayviewmodel\/isvalidotp","abstract":[{"type":"text","text":"True when the entered OTP is considered valid."}],"kind":"symbol","identifier":"doc:\/\/com.moyasar.MoyasarSdk\/documentation\/MoyasarSdk\/STCPayViewModel\/isValidOtp","title":"isValidOtp","fragments":[{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"kind":"identifier","text":"isValidOtp"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Bool","preciseIdentifier":"s:Sb"}],"type":"topic"},"doc://com.moyasar.MoyasarSdk/s8SendableP":{"title":"Swift.Sendable","type":"unresolvable","identifier":"doc:\/\/com.moyasar.MoyasarSdk\/s8SendableP"},"doc://com.moyasar.MoyasarSdk/documentation/MoyasarSdk":{"role":"collection","abstract":[],"kind":"symbol","identifier":"doc:\/\/com.moyasar.MoyasarSdk\/documentation\/MoyasarSdk","type":"topic","title":"MoyasarSdk","url":"\/documentation\/moyasarsdk"},"doc://com.moyasar.MoyasarSdk/documentation/MoyasarSdk/STCPayViewModel":{"fragments":[{"text":"class","kind":"keyword"},{"text":" ","kind":"text"},{"text":"STCPayViewModel","kind":"identifier"}],"role":"symbol","kind":"symbol","url":"\/documentation\/moyasarsdk\/stcpayviewmodel","abstract":[{"text":"A view model that manages the STC Pay payment flow.","type":"text"}],"title":"STCPayViewModel","type":"topic","identifier":"doc:\/\/com.moyasar.MoyasarSdk\/documentation\/MoyasarSdk\/STCPayViewModel","navigatorTitle":[{"text":"STCPayViewModel","kind":"identifier"}]}}}